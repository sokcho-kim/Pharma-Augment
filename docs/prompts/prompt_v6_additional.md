âœ… ìš´ì˜ ì§€ì‹œë¬¸ (for Claude Code)
0) ëª©í‘œ

ì„ë² ë”© íŒŒì¸íŠœë‹ìš© ì§ˆë¬¸ ë°ì´í„° ìƒì„±.

ê¸¸ì´ ë°´ë“œ í˜¼í•©ìœ¼ë¡œ í‚¤ì›Œë“œ ê³¼ì í•© ë°©ì§€:
SR(25â€“80ì) 60% Â· MR(80â€“160ì) 25% Â· LR(200â€“600ì, ì‹œë‚˜ë¦¬ì˜¤) 15%.

ë¼ë²¨ ë¹„ìœ¨(í–‰ ë‹¨ìœ„): POS : HN : EN = 6 : 3 : 0(ê¸°ë³¸). ENì€ ì‹¤í—˜ì‹œì—ë§Œ on.

ì•½ì œ(Drug) / ê³ ì‹œ(Notice) íŒŒì´í”„ë¼ì¸ ì™„ì „ ë¶„ë¦¬. ê³µí†µ ìœ í‹¸ë§Œ ê³µìœ .

1) ì…Â·ì¶œë ¥ ìŠ¤í‚¤ë§ˆ
ì…ë ¥ ì—‘ì…€ í—¤ë” ë§¤í•‘

ì•½ì œ: ì•½ì œë¶„ë¥˜ë²ˆí˜¸â†’code, ì•½ì œ ë¶„ë¥˜ëª…â†’code_name, êµ¬ë¶„â†’title, ì„¸ë¶€ì¸ì •ê¸°ì¤€ ë° ë°©ë²•â†’text

ê³ ì‹œ: ê³ ì‹œë²ˆí˜¸â†’code, ê³ ì‹œëª…ì¹­â†’code_name, ë³€ê²½ ì „ ë‚´ìš©â†’text_prev, ë³€ê²½ í›„ ë‚´ìš©â†’text

ì œì¶œìš© ì¶œë ¥(ì—‘ì…€)

ê³ ì • ì—´: [ì•½ì œë¶„ë¥˜ë²ˆí˜¸, ì•½ì œ ë¶„ë¥˜ëª…, êµ¬ë¶„, ì„¸ë¶€ì¸ì •ê¸°ì¤€ ë° ë°©ë²•, question, ë¼ë²¨]

ì•½ì œ: ê·¸ëŒ€ë¡œ ë§¤í•‘.

ê³ ì‹œ: ì•½ì œë¶„ë¥˜ë²ˆí˜¸=ê³ ì‹œë²ˆí˜¸, ì•½ì œ ë¶„ë¥˜ëª…=ê³ ì‹œëª…ì¹­, êµ¬ë¶„=ê³ ì‹œëª…ì¹­, ì„¸ë¶€ì¸ì •ê¸°ì¤€ ë° ë°©ë²•=ë³€ê²½ í›„ ë‚´ìš©.

2) ì „ì²˜ë¦¬

ì»¬ëŸ¼ ë§¤í•‘ í›„ ê²°ì¸¡ ì²´í¬(í•„ìˆ˜ ì—´ ì—†ìœ¼ë©´ í•´ë‹¹ í–‰ skip ë¡œê·¸).

ë¬¸ë‹¨ ê²½ê³„ ê¸°ì¤€ 2â€“3kì ìŠ¬ë¼ì´ì‹±(ì¤‘ê°„ ë¬¸ì¥ ëŠì§€ ë§ ê²ƒ).

ì•½ì œ ì „ìš© íŒŒì‹±(title):

main_name=ê´„í˜¸ ì• ì£¼ ì•½ì œëª…,

brand_names="í’ˆëª…:" ë’¤ë¥¼ Â·// split(ì—†ìœ¼ë©´ []).

ì •ë‹µ ë¬¸ì„œ(Positive ê·¼ê±°) ì„ íƒ:

ì•½ì œ: text ìŠ¬ë¼ì´ìŠ¤.

ê³ ì‹œ: ê¸°ë³¸ text(=ë³€ê²½ í›„ ë‚´ìš©); ì§ˆë¬¸ì— â€œê°œì • ì „/ì‹œí–‰ ì „â€ì´ ëª…ì‹œë˜ë©´ text_prev.

3) ìƒì„±(LLM) â€” ì¤„ë‹¨ìœ„ í…ìŠ¤íŠ¸ë§Œ, í”„ë¡¬í”„íŠ¸ëŠ” ì˜ì–´ / ì¶œë ¥ì€ í•œêµ­ì–´

ê³µí†µ ì œì•½(ìƒì„±ê¸°ì—ê²Œë§Œ):

One line = one question. Korean only. No JSON.

Pronoun ban: forbid ì´ê²ƒ/ê·¸ê²ƒ/í•´ë‹¹/ë³¸/ë™ + (ì•½|ì œì œ|ì œí’ˆ|ê³ ì‹œ|ì¡°í•­|ë‚´ìš©|í•­).

Include at least one of: digit/unit/policy term
(policy: ê¸‰ì—¬, ë¹„ê¸‰ì—¬, ë³¸ì¸ë¶€ë‹´, ì‚¬ì „ìŠ¹ì¸, ìˆ˜ê°€, ì½”ë“œ, ê¸°ê°„, íšŸìˆ˜, ì‹œí–‰ì¼, ê°œì •)

Vary openings (â€œë¬´ì—‡/ì–´ë–»ê²Œ/ì–¸ì œ/ì™œ/ì–´ë–¤/ì–´ë””ì„œ/ì–´ëŠ/ëˆ„ê°€â€) so no single token > 30% in a set.

No external inference; use the document only.

3-A) POS ìƒì„± â€” ì•½ì œ (SR/MR/LR ê°ê° í˜¸ì¶œ)

SR (25â€“80 chars)

You generate Korean questions for an insurance review embedding model.
Return many lines, each a single Korean question strictly based on the document below.
Constraints: 25â€“80 characters; end with '?'; include at least one number/unit/policy term;
no pronouns like 'ì´ê²ƒ/ê·¸ê²ƒ/í•´ë‹¹/ë³¸/ë™ + ì•½Â·ì œì œÂ·ì œí’ˆ'; one issue per line; vary openings; no JSON.

Document:
<<<DOC
{drug_text_slice}
DOC
>>>


MR (80â€“160 chars)

Generate many Korean questions as lines based only on the document.
Constraints: 80â€“160 characters; end with '?'; include at least one number/unit/policy term;
strict pronoun ban; one issue per line; vary openings; no JSON.

Document:
<<<DOC
{drug_text_slice}
DOC
>>>


LR (200â€“600 chars, scenario â†’ question)

Create multiple Korean scenarios (2â€“4 sentences) followed by a final question line.
Separate each case with a blank line. Use only the document content.
Constraints: 200â€“600 characters per case; the last sentence must be a question ending with '?';
include at least one policy term or number/unit; avoid pronouns in the question; no JSON.

Document:
<<<DOC
{drug_text_slice}
DOC
>>>


ì•½ì œ ë¬¸êµ¬ íŒíŠ¸(í”„ë¡¬í”„íŠ¸ì— ë„£ì§€ ë§ê³  ì½”ë“œì—ì„œ ì°¸ê³ ): ê¸‰ì—¬/ë¹„ê¸‰ì—¬/ê¸°ê°„/íšŸìˆ˜/ê²½êµ¬â†”ì£¼ì‚¬/ì‚¬ì „ìŠ¹ì¸/ë³¸ì¸ë¶€ë‹´/ëŒ€ìƒêµ°/ì œì¶œì„œë¥˜/ëª¨ë‹ˆí„°ë§.

3-B) POS ìƒì„± â€” ê³ ì‹œ (SR/MR/LR)

SR/MRëŠ” ìœ„ ì•½ì œ í”„ë¡¬í”„íŠ¸ì—ì„œ Documentë§Œ notice_after_text_sliceë¡œ êµì²´.
LRë„ ë™ì¼í•˜ë˜ â€œìˆ˜ê°€/ì½”ë“œ/ì‹œí–‰ì¼/ê°œì •/ì œì¶œ/ì´ì˜ì‹ ì²­â€ ìš©ì–´ê°€ ìì—°ìŠ¤ëŸ½ê²Œ í¬í•¨ë˜ë„ë¡ ë¬¸ì„œ ë‚´ìš©ë§Œ ì‚¬ìš©.

4) HN(near-miss) ìƒì„± â€” ì½”ë“œ ë³€í˜• + ë¦¬ë¼ì´íŠ¸

ì›ì¹™: â€œë™ì¼ ì„±ë¶„/í•µì‹¬ í‚¤ì›Œë“œ ìœ ì§€ + facet 1ê°œë§Œ ì˜ë„ì ìœ¼ë¡œ ì–´ê¸‹ë‚¨â€.

ë³€í˜•ì€ ì½”ë“œê°€ ìˆ˜í–‰(LLMì€ ë¦¬ë¼ì´íŠ¸ë§Œ).

4-A) ë³€í˜• ê·œì¹™(ì½”ë“œ)

ê³ ì •: ì„±ë¶„/ì£¼ ì•½ì œëª…(+ê°€ëŠ¥í•˜ë©´ ì œí˜•/ê²½ë¡œ), í’ˆëª…/ì½”ë“œ í† í°.

ë³€ê²½(facet 1ê°œë§Œ): ì ì‘ì¦, ëŒ€ìƒ/ì—°ë ¹, ê¸°ê°„/íšŸìˆ˜ ê²½ê³„, ìš©ëŸ‰/ê°„ê²©, ê²½êµ¬â†”ì£¼ì‚¬, ê¸‰ì—¬â†”ë³¸ì¸ë¶€ë‹´, ì‚¬ì „ìŠ¹ì¸, ì„ í–‰ìš”ë²•, ëª¨ë‹ˆí„°ë§.

ê³ ì‹œ ì „ìš©: ë³€ê²½ ì „â†”í›„ í˜¼ë™, ì´ˆì§„â†”ì¬ì§„, ì‹œí–‰ì¼Â·ì ìš©ì¼, ì œì¶œì„œë¥˜ ìœ ë¬´, ê¸°ê°„/íšŸìˆ˜ ìƒí•œ ê²½ê³„.

ì•µì»¤ ì„ íƒ: POS ìƒìœ„ 3â€“5ê°œ. ê° ì•µì»¤ë‹¹ HN 1â€“3ê°œ.

4-B) HN ë¦¬ë¼ì´íŠ¸ í”„ë¡¬í”„íŠ¸(ê³µí†µ)
Rewrite the given Korean sentence into a natural Korean question.
Constraints: 25â€“80 characters; end with '?'; keep numbers/units/policy terms; no pronouns.
Return exactly one line. No JSON.

Original:
{mutated_anchor_sentence}

5) í›„ì²˜ë¦¬ ê²Œì´íŠ¸(ê°•ì œ)

ê¸¸ì´ ë°´ë“œ

SR: 25â€“80ì, MR: 80â€“160ì, LR case: 200â€“600ì(ë§ˆì§€ë§‰ ë¬¸ì¥ë§Œ questionìœ¼ë¡œ ì¶”ì¶œ).

ë¬¸ì¥ë¶€í˜¸: ? í•„ìˆ˜.

ëŒ€ëª…ì‚¬ ê¸ˆì§€(ì •ê·œì‹):
(ì´ê²ƒ|ê·¸ê²ƒ|í•´ë‹¹|ë³¸|ë™)\s*(ì•½|ì œì œ|ì œí’ˆ|ê³ ì‹œ|ì¡°í•­|ë‚´ìš©|í•­)|\b(ì´ê²ƒ|ê·¸ê²ƒ)\b

LR ì‹œë‚˜ë¦¬ì˜¤ëŠ” ë³¸ë¬¸ ì„œìˆ ì— í•œí•´ í—ˆìš©í•˜ë˜ ì§ˆë¬¸ë¬¸ì—ëŠ” ê¸ˆì§€.

êµ¬ì²´ì„±: ìˆ«ì/ë‹¨ìœ„ (mg|ã|U/L|%|íšŒ|ê°œì›”|ì¼|ì£¼) ë˜ëŠ” ì •ì±…ì–´(ìœ„ ëª©ë¡) â‰¥1.

ë‹¨ì¼ ë…¼ì : ,|ë°|/ 2íšŒ ì´ìƒì´ë©´ ë¶„ë¦¬/íê¸°.

ë¬¸ë‘ ë¶„í¬: ë™ì¼ ë¬¸ë‘ >30% â†’ ì´ˆê³¼ë¶„ ì¬í”„ë ˆì´ì¦ˆ í.

ë³¸ë¬¸ ì˜¤ë²„ë©: ìŠ¤í†±ì›Œë“œ ì œì™¸ êµì§‘í•© ë¹„ìœ¨ â‰¥0.25.

ì¤‘ë³µ ì œê±°: RapidFuzz token_set_ratio â‰¥ 82 or 4/5-gram ì¤‘ë³µ â†’ ì œê±°.

HN ê²€ì¦(ë£° ì²´ì»¤): ê³ ì • í† í° í¬í•¨ + facet ì •í™•íˆ 1ê°œë§Œ ë³€í–ˆëŠ”ì§€ í™•ì¸(2ê°œ ì´ìƒì´ë©´ íê¸°/ê°•ë“±).

6) ë¼ë²¨ ë¹„ìœ¨ ì •ê·œí™”(í–‰ ë‹¨ìœ„)

ëª©í‘œ Nê°œ, weights = [POS 6, HN 3, EN 0](í•©=9).

ê° ë¼ë²¨ ëª©í‘œ = floor(N * w/9), ë‚¨ëŠ” ê°œìˆ˜ëŠ” ì†Œìˆ˜ì  í° ìˆœìœ¼ë¡œ POSâ†’HNâ†’EN ë°°ë¶„.

ê¸°ë³¸ì€ EN=0. ì‹¤í—˜ì‹œë§Œ EN on.

7) ê¸¸ì´ ë°´ë“œ ë¹„ìœ¨(ë¼ë²¨ê³¼ ë³„ê°œ)

SR 60% Â· MR 25% Â· LR 15%.

ê° ë°´ë“œ ë‚´ë¶€ì—ì„œë„ ë¼ë²¨ ë¹„ìœ¨(6:3:0)ì„ ëŒ€ëµ ìœ ì§€(Â±1).

8) ì‹¤íŒ¨Â·ê²¬ê³ í™”

ìƒì„± ì¤„ ìˆ˜ ë¶€ì¡±(ë°´ë“œë³„ <10ì¤„): temperatureâ†‘ í›„ 2íšŒ ì¬ì‹œë„.

429/timeout: ì§€ìˆ˜ ë°±ì˜¤í”„(2â†’4â†’8â†’ìµœëŒ€ 20s), ìµœëŒ€ 3íšŒ.

ëŒ€ëª…ì‚¬/ê¸¸ì´/ë¬¸ë‘ ê³¼ë‹¤ ìœ„ë°˜: í•´ë‹¹ ë¶€ë¶„ ë¶€ë¶„ ì¬ìƒì„±.

brand_names ì—†ìŒ(ì•½ì œ): POSëŠ” ì£¼ ì•½ì œëª… ì¤‘ì‹¬, HNì€ facet ë³€í˜• ìœ„ì£¼.

9) ì €ì¥

ê° ì§ˆë¬¸ì„ í•œ í–‰ìœ¼ë¡œ í™•ì¥, ì›ë³¸ ë©”íƒ€ ë³µì‚¬.

ì—‘ì…€ ì €ì¥(UTF-8): [ì•½ì œë¶„ë¥˜ë²ˆí˜¸, ì•½ì œ ë¶„ë¥˜ëª…, êµ¬ë¶„, ì„¸ë¶€ì¸ì •ê¸°ì¤€ ë° ë°©ë²•, question, ë¼ë²¨].

(ì„ íƒ) í•™ìŠµìš© JSONL ì•µì»¤íŒ©ë„ ë³‘í–‰ ì €ì¥:
{"anchor_id", "band": "SR/MR/LR", "question", "doc_slice_id", "label"}
â€” ê°™ì€ í–‰/ìŠ¬ë¼ì´ìŠ¤ì˜ SRÂ·MRÂ·LRì„ ë™ì¼ anchor_idë¡œ ë¬¶ì–´ ì‚¬ìš©.

10) ì˜µì…˜(A/B ì‹¤í—˜)

ë¹„ìœ¨ ë¹„êµ: 6:3:0 vs 6:3:1(EN 10%) â€” ì†Œê·œëª¨ ìƒì„± í›„ Dev Recall@10 / nDCG@10 ë¹„êµ.

ê³ ì‹œ â€œê°œì • ì „â€ ì „ìš© ìŠ¬ë¼ì´ìŠ¤ ì„¸íŠ¸ ë³„ë„ ì¶œë ¥(ë¦¬ìŠ¤í¬ ì ê²€ìš©).

ğŸ§© êµ¬í˜„ ë©”ëª¨(ë‚´ë¶€)

ìƒì„±ê¸°ëŠ” ìµœì†Œ ì§€ì‹œ(ê°„ê²° í”„ë¡¬í”„íŠ¸), ì¤‘ìš” ê·œì¹™ì€ ì½”ë“œ/ì²´ì»¤ì—ì„œ ë³´ì¦ â†’ íŒ¨í„´ ê³ ì°©/í”„ë¡¬í”„íŠ¸ ê²Œì´ë° ë°©ì§€.

HNì€ í•­ìƒ ì½”ë“œê°€ facet 1ê°œë§Œ ë°”ê¾¸ê³  LLMì€ ë¦¬ë¼ì´íŠ¸ë§Œ.

LR ì‹œë‚˜ë¦¬ì˜¤ëŠ” ë§ˆì§€ë§‰ ë¬¸ì¥ì„ questionìœ¼ë¡œ ì¶”ì¶œ, ë‚˜ë¨¸ì§€ ë¬¸ì¥ì€ í•™ìŠµì‹œ ë©€í‹°ë·°(ì•µì»¤íŒ©)ë¡œ í™œìš© ê°€ëŠ¥.